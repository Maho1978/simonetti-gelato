{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahmu/OneDrive/Desktop/simonetti-hybrid/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\n\n// For server-side operations with elevated privileges\nexport const supabaseAdmin = createClient(\n  supabaseUrl,\n  process.env.SUPABASE_SERVICE_ROLE_KEY || supabaseAnonKey\n)\n"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,yRAAY,EAAC,aAAa;AAG3C,MAAM,gBAAgB,IAAA,yRAAY,EACvC,aACA,QAAQ,GAAG,CAAC,yBAAyB,IAAI"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahmu/OneDrive/Desktop/simonetti-hybrid/pages/api/orders/index.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from 'next'\nimport { supabaseAdmin } from '@/lib/supabase'\n\nexport default async function handler(\n  req: NextApiRequest,\n  res: NextApiResponse\n) {\n  if (req.method === 'POST') {\n    try {\n      const { \n        user_id, \n        guest_email,\n        items, \n        total, \n        delivery_address,\n        payment_intent_id \n      } = req.body\n\n      // Create order\n      const { data, error } = await supabaseAdmin\n        .from('orders')\n        .insert({\n          user_id: user_id || null,\n          guest_email: guest_email || null,\n          items,\n          total,\n          delivery_address,\n          payment_intent_id,\n          status: 'pending',\n        })\n        .select()\n        .single()\n\n      if (error) throw error\n\n      res.status(200).json({ order: data })\n    } catch (error: any) {\n      console.error('Error creating order:', error)\n      res.status(500).json({ \n        error: error.message || 'Failed to create order' \n      })\n    }\n  } else if (req.method === 'GET') {\n    try {\n      const { user_id } = req.query\n\n      let query = supabaseAdmin\n        .from('orders')\n        .select('*')\n        .order('created_at', { ascending: false })\n\n      if (user_id) {\n        query = query.eq('user_id', user_id)\n      }\n\n      const { data, error } = await query\n\n      if (error) throw error\n\n      res.status(200).json({ orders: data })\n    } catch (error: any) {\n      console.error('Error fetching orders:', error)\n      res.status(500).json({ \n        error: error.message || 'Failed to fetch orders' \n      })\n    }\n  } else {\n    res.status(405).json({ error: 'Method not allowed' })\n  }\n}\n"],"names":[],"mappings":";;;;AACA;;;;;;AAEe,eAAe,QAC5B,GAAmB,EACnB,GAAoB;IAEpB,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,IAAI;YACF,MAAM,EACJ,OAAO,EACP,WAAW,EACX,KAAK,EACL,KAAK,EACL,gBAAgB,EAChB,iBAAiB,EAClB,GAAG,IAAI,IAAI;YAEZ,eAAe;YACf,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uKAAa,CACxC,IAAI,CAAC,UACL,MAAM,CAAC;gBACN,SAAS,WAAW;gBACpB,aAAa,eAAe;gBAC5B;gBACA;gBACA;gBACA;gBACA,QAAQ;YACV,GACC,MAAM,GACN,MAAM;YAET,IAAI,OAAO,MAAM;YAEjB,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAK;QACrC,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,yBAAyB;YACvC,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBACnB,OAAO,MAAM,OAAO,IAAI;YAC1B;QACF;IACF,OAAO,IAAI,IAAI,MAAM,KAAK,OAAO;QAC/B,IAAI;YACF,MAAM,EAAE,OAAO,EAAE,GAAG,IAAI,KAAK;YAE7B,IAAI,QAAQ,uKAAa,CACtB,IAAI,CAAC,UACL,MAAM,CAAC,KACP,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE1C,IAAI,SAAS;gBACX,QAAQ,MAAM,EAAE,CAAC,WAAW;YAC9B;YAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;YAE9B,IAAI,OAAO,MAAM;YAEjB,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,QAAQ;YAAK;QACtC,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,0BAA0B;YACxC,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBACnB,OAAO,MAAM,OAAO,IAAI;YAC1B;QACF;IACF,OAAO;QACL,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqB;IACrD;AACF"}}]
}