{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahmu/OneDrive/Desktop/simonetti-hybrid/lib/stripe.ts"],"sourcesContent":["import { loadStripe } from '@stripe/stripe-js'\nimport Stripe from 'stripe'\n\nexport const stripePromise = loadStripe(\n  process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY!\n)\n\nexport const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n  apiVersion: '2024-11-20.acacia', // ‚úÖ AKTUALISIERT\n})"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEO,MAAM,gBAAgB,IAAA,oQAAU;AAIhC,MAAM,SAAS,IAAI,kNAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB,EAAG;IAC/D,YAAY;AACd"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahmu/OneDrive/Desktop/simonetti-hybrid/pages/api/stripe/create-payment-intent.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from 'next'\nimport { stripe } from '@/lib/stripe'\n\nexport default async function handler(\n  req: NextApiRequest,\n  res: NextApiResponse\n) {\n  if (req.method !== 'POST') {\n    return res.status(405).json({ error: 'Method not allowed' })\n  }\n\n  try {\n    const { amount, metadata, payment_method_types } = req.body\n\n    // ‚úÖ DEBUG LOGGING\n    console.log('üîç Payment Intent Request:', {\n      amount,\n      payment_method_types,\n      hasStripe: !!stripe,\n      stripeKey: process.env.STRIPE_SECRET_KEY ? 'SET' : 'MISSING'\n    })\n\n    // Validierung\n    if (!amount || amount < 0.5) {\n      throw new Error('Invalid amount: ' + amount)\n    }\n\n    if (!payment_method_types || payment_method_types.length === 0) {\n      throw new Error('No payment methods provided')\n    }\n\n    // Create payment intent\n    const paymentIntent = await stripe.paymentIntents.create({\n      amount: Math.round(amount * 100),\n      currency: 'eur',\n      payment_method_types: payment_method_types,\n      metadata: metadata || {},\n    })\n\n    console.log('‚úÖ PaymentIntent created:', paymentIntent.id)\n\n    res.status(200).json({ \n      clientSecret: paymentIntent.client_secret \n    })\n  } catch (error: any) {\n    // ‚úÖ BESSERES ERROR LOGGING\n    console.error('‚ùå Payment Intent Error:', {\n      message: error.message,\n      type: error.type,\n      code: error.code,\n      stack: error.stack\n    })\n    \n    res.status(500).json({ \n      error: error.message || 'Failed to create payment intent',\n      details: error.type || 'unknown_error'\n    })\n  }\n}"],"names":[],"mappings":";;;;AACA;;;;;;AAEe,eAAe,QAC5B,GAAmB,EACnB,GAAoB;IAEpB,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqB;IAC5D;IAEA,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,oBAAoB,EAAE,GAAG,IAAI,IAAI;QAE3D,kBAAkB;QAClB,QAAQ,GAAG,CAAC,8BAA8B;YACxC;YACA;YACA,WAAW,CAAC,CAAC,8JAAM;YACnB,WAAW,QAAQ,GAAG,CAAC,iBAAiB,GAAG,QAAQ;QACrD;QAEA,cAAc;QACd,IAAI,CAAC,UAAU,SAAS,KAAK;YAC3B,MAAM,IAAI,MAAM,qBAAqB;QACvC;QAEA,IAAI,CAAC,wBAAwB,qBAAqB,MAAM,KAAK,GAAG;YAC9D,MAAM,IAAI,MAAM;QAClB;QAEA,wBAAwB;QACxB,MAAM,gBAAgB,MAAM,8JAAM,CAAC,cAAc,CAAC,MAAM,CAAC;YACvD,QAAQ,KAAK,KAAK,CAAC,SAAS;YAC5B,UAAU;YACV,sBAAsB;YACtB,UAAU,YAAY,CAAC;QACzB;QAEA,QAAQ,GAAG,CAAC,4BAA4B,cAAc,EAAE;QAExD,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YACnB,cAAc,cAAc,aAAa;QAC3C;IACF,EAAE,OAAO,OAAY;QACnB,2BAA2B;QAC3B,QAAQ,KAAK,CAAC,2BAA2B;YACvC,SAAS,MAAM,OAAO;YACtB,MAAM,MAAM,IAAI;YAChB,MAAM,MAAM,IAAI;YAChB,OAAO,MAAM,KAAK;QACpB;QAEA,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YACnB,OAAO,MAAM,OAAO,IAAI;YACxB,SAAS,MAAM,IAAI,IAAI;QACzB;IACF;AACF"}}]
}